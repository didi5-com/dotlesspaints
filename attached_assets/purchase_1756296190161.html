<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="WhatsApp_Image_2024-12-07_at_2.25.14_PM-removebg-preview.png" rel="icon" />
<title>Purchase Page</title>
	<style type="text/css">body {
      font-family: 'Arial', sans-serif;
      background: url('IMG-20241111-WA0024.jpg') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 20px;
      color: #ffffff;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .cart-items {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .cart-item {
      background-color: #5e76be;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      width: 300px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      color: #333333;
    }

    .cart-item h2 {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .cart-item p {
      margin-bottom: 15px;
    }

    .cart-item button {
      background-color: #e74c3c;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .cart-item button:hover {
      background-color: #c0392b;
    }

    .paystack-button {
      display: block;
      width: 200px;
      margin: 30px auto;
      padding: 12px;
      text-align: center;
      background-color:  #ffcc00;
      color: white;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    .paystack-button:hover {
      background-color: #a08000;
    }

    .empty-cart {
      text-align: center;
      font-size: 1.2em;
      color: #ffffff;
    }
	</style>
	<!-- Paystack Script --><script src="https://js.paystack.co/v1/inline.js"></script>
</head>
<body>
<h1>Your Selected Designs</h1>

<div class="cart-items" id="cart-items"><!-- Items will load dynamically --></div>
<!-- Paystack Button -->

<p><button class="paystack-button" id="paystack-button">Pay Now</button><!-- WhatsApp Link --><a href="https://wa.me/2348063884267" style="position: fixed; bottom: 20px; right: 20px;" target="_blank"><img alt="WhatsApp" src="—Pngtree—whatsapp icon whatsapp logo free_5990837.png" style="width: 83px; height: 83px;" /> </a> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const cartContainer = document.getElementById('cart-items');
      const paystackButton = document.getElementById('paystack-button');

      if (cart.length > 0) {
        let totalPrice = 0;
        cart.forEach((item, index) => {
          const cartItem = document.createElement('div');
          cartItem.className = 'cart-item';
          cartItem.innerHTML = `
            <h2>${item.name}</h2>
            <p>Price: ₦${item.price}</p>
            <button onclick="removeItem(${index})">Remove</button>
          `;
          totalPrice += item.price;
          cartContainer.appendChild(cartItem);
        });

        // Attach Paystack Payment Process
        paystackButton.onclick = () => {
          const handler = PaystackPop.setup({
            key: 'pk_live_e437058da7a1e8cef8137ca95680bd71cb8f6ecb', // Replace with your public key
            email: 'dinxx@dotlesspaint.com.ng', // Replace with customer email
            amount: totalPrice * 100, // Amount in kobo
            currency: 'NGN',
            ref: `txn-${Math.floor(Math.random() * 1000000000 + 1)}`, // Random transaction ref
            callback: function(response) {
              alert('Payment Successful! Transaction ref: ' + response.reference);
              clearCart();
            },
            onClose: function() {
              alert('Transaction was not completed. Try again.');
            },
          });
          handler.openIframe();
        };
      } else {
        cartContainer.innerHTML = '<p class="empty-cart">Your cart is empty.</p>';
        paystackButton.style.display = 'none';
      }
    });

    function removeItem(index) {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      location.reload(); // Refresh page to update UI
    }

    function clearCart() {
      localStorage.removeItem('cart');
      location.reload(); // Refresh page to show empty cart
    }
  </script></p>
</body>
</html>